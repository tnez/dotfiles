# Set prefix to Ctl-Space
unbind C-b
set -g prefix C-Space
bind Space send-prefix

# pbcopy support
set-option -g default-command "reattach-to-user-namespace -l bash"

# Use vi keys
set -gw mode-keys vi

# Update window title
set -g set-titles on
set -g set-titles-string '#S:#I.#P #W'

# Enable mouse
set -g mouse on

# 256 color support
set -g default-terminal "screen-256color"

# Show activity in background windows
setw -g monitor-activity on

# Start window numbers from 1
set -g base-index 1

#hsplit
unbind '"'
bind / split-window -h -c "#{pane_current_path}"

#vsplit
unbind %
bind - split-window -v -c "#{pane_current_path}"

# set pane colors - hilight the active pane
set-option -g pane-border-fg colour60 #base02
set-option -g pane-active-border-fg colour62 #base01

# colorize messages in the command line
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# smart pane switching with awareness of vim splits
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

bind C-l send-keys 'C-l'

# easier session navigation
bind C-Space choose-tree -w

# Status Bar
source-file ~/.config/tmux/status-line/index.conf

# list all paste buffers (default key is '#')
bind-key b list-buffers

# choose buffer to paste interactively (default key was '=')
bind-key p choose-buffer

# delete the most recently copied buffer of text (default key was '-')
bind-key x delete-buffer

# Panes
bind up resize-pane -U 5
bind down resize-pane -D 5
bind left resize-pane -L 5
bind right resize-pane -R 5
bind * resize-pane -x 80 # Shift-8 make current pane width  => 80
bind ) resize-pane -y 20 # Shift-0 make current pane height => 20
bind tab next-layout
unbind C-o
bind r rotate-window
bind space select-pane -t:.+

# kill current pane/window
bind-key q confirm-before kill-pane
bind-key Q confirm-before kill-window

# Patch for OS X pbpaste and pbcopy under tmux.
set-option -g default-command "which reattach-to-user-namespace > /dev/null && reattach-to-user-namespace -l $SHELL || $SHELL"

# Pane resizing
bind-key -r J resize-pane -D
bind-key -r Down resize-pane -D
bind-key -r K resize-pane -U
bind-key -r Up resize-pane -U
bind-key -r H resize-pane -L
bind-key -r Left resize-pane -L
bind-key -r L resize-pane -R
bind-key -r Right resize-pane -R

# easily toggle synchronization (mnemonic: e is for echo)
# sends input to all panes in a given window.
bind e setw synchronize-panes on
bind E setw synchronize-panes off

# No escape time for vi mode
set -sg escape-time 0

# Bigger history
set -g history-limit 10000

# Reload key
unbind R
bind R source-file ~/.tmux.conf

# Use fish shell
set -g default-command /usr/local/bin/fish
set -g default-shell /usr/local/bin/fish

# Use Base16 Color Themes
source-file ~/.config/tmux/colors.conf

# Send events on focus change
set -g focus-events on
